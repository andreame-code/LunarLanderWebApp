<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Lunar Lander Web App</title>
  <!-- Include the stylesheet for layout and canvas styling -->
  <link rel="stylesheet" href="style.css" />

  <!-- Load a retro arcade font for the interface -->
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet" />

  <!-- External library for capturing screenshots of the game area -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
  <h1>Lunar Lander</h1>

  <!-- Main menu shown before the game starts -->
  <div id="menu" role="menu">
    <button id="playButton" aria-label="Play game">Gioca</button>
    <button id="instructionsButton" aria-label="Show instructions">Istruzioni</button>
    <button id="creditsButton" aria-label="Show credits">Credits</button>
  </div>

  <!-- Lander selection shown after clicking play -->
  <div id="landerSelection" class="hidden" role="menu">
    <p>Seleziona il tuo lander</p>
    <div id="landerOptions">
      <div class="landerOption">
        <button class="landerChoice" data-type="classic" aria-label="Lander classico">
          <svg width="40" height="40">
            <rect x="10" y="5" width="20" height="30" fill="#dcdcdc" />
          </svg>
        </button>
        <p class="landerInfo">
          Carburante: 1000<br />
          Massa: 1000<br />
          Spinta principale: 6<br />
          Spinta laterale: 3<br />
          Qualità: Equilibrato e affidabile<br />
          Difetti: Nessun punto di forza
        </p>
      </div>
      <div class="landerOption">
        <button class="landerChoice" data-type="round" aria-label="Lander rotondo">
          <svg width="40" height="40">
            <circle cx="20" cy="20" r="15" fill="#dcdcdc" />
          </svg>
        </button>
        <p class="landerInfo">
          Carburante: 1200<br />
          Massa: 1100<br />
          Spinta principale: 5.5<br />
          Spinta laterale: 2.5<br />
          Qualità: Grande autonomia<br />
          Difetti: Poco reattivo
        </p>
      </div>
      <div class="landerOption">
        <button class="landerChoice" data-type="triangle" aria-label="Lander triangolare">
          <svg width="40" height="40">
            <polygon points="20,5 35,35 5,35" fill="#dcdcdc" />
          </svg>
        </button>
        <p class="landerInfo">
          Carburante: 800<br />
          Massa: 900<br />
          Spinta principale: 7<br />
          Spinta laterale: 4<br />
          Qualità: Molto agile<br />
          Difetti: Carburante limitato
        </p>
      </div>
    </div>
  </div>

  <!-- The gameContainer wraps the canvas, status, controls and instructions so it can be captured as a single image -->
  <div id="gameContainer" class="hidden" role="main">
  <!-- Canvas element where the lander and thrusters are drawn -->
  <canvas id="gameCanvas" width="360" height="480" aria-label="Game canvas"></canvas>
    <!-- Compact status indicators overlaid on the game area -->
    <div id="status">
      <p id="altitude">ALT 100m</p>
      <p id="vVelocity">VV 0m/s</p>
      <p id="hVelocity">HV 0m/s</p>
      <p id="fuel">FUEL 1000</p>
      <p id="level">LVL 1</p>
    </div>
    <!-- Message displayed at end of game -->
    <p id="message"></p>
  <!-- Buttons displayed after the game ends: restart and share.  They are wrapped in
       a container so they can be centrally positioned over the game area.  The
       container is hidden by default and shown when the game ends. -->
  <div id="endButtons" class="hidden">
    <button id="restartButton" class="hidden" aria-label="Restart level">Restart</button>
    <button id="shareButton" class="hidden" aria-label="Share statistics">Share Stats</button>
  </div>

  <!-- Mobile controls: visible on touch devices -->
  <div id="mobileControls">
    <button id="btnUp" aria-label="Main thruster">↑</button>
    <button id="btnLeft" aria-label="Left thruster">←</button>
    <button id="btnRight" aria-label="Right thruster">→</button>
  </div>
  <!-- Instructions displayed below the game -->
  <p id="instructions">
    Use the arrow keys (↑ for the main engine, ← and → for the side thrusters)
    or the on‑screen buttons above on mobile devices. Land softly on the
    <span class="landing-pad">green landing pad</span>! Each time you land
    successfully you advance to the next level, which increases gravity and reduces
    your starting fuel.
  </p>
  </div> <!-- end of gameContainer -->

  <!-- Modals for instructions and credits -->
  <div id="instructionsModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="instructionsTitle">
    <div class="modal-content">
      <h2 id="instructionsTitle">Istruzioni</h2>
      <p>
        Usa le frecce della tastiera per controllare il modulo: ↑ per accendere il motore principale, ← e → per i propulsori laterali.
        Sui dispositivi mobili puoi usare i pulsanti sullo schermo. Atterra dolcemente sulla
        <span class="landing-pad">piattaforma verde</span>! Ogni volta che atterri con successo
        avanzi al livello successivo, che aumenta la gravità e riduce il carburante.
      </p>
      <button id="closeInstructions" aria-label="Close instructions">Chiudi</button>
    </div>
  </div>
  <div id="creditsModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="creditsTitle">
    <div class="modal-content">
      <h2 id="creditsTitle">Credits</h2>
      <p>
        Questo gioco è stato creato interamente da un modello di linguaggio di grandi dimensioni,
        nello specifico <strong>ChatGPT</strong>, per conto dell'utente Andrea. Tutto il codice e i contenuti sono stati generati
        dall'AI, con la supervisione dell'utente.
      </p>
      <button id="closeCredits" aria-label="Close credits">Chiudi</button>
    </div>
  </div>
  <!-- Core lander physics and game controller -->
  <script src="src/lander.js"></script>
  <script src="src/game.js"></script>
</body>
</html>